{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from \"expo-status-bar\";\nimport React, { useState, Component, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { ScroolView } from \"react-native-web/dist/index\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar cloud_url = \"https://e6waofnzq8.execute-api.eu-central-1.amazonaws.com/main\";\nvar ListPage = function ListPage(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setLoading = _useState4[1];\n  var getToken = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var value = yield AsyncStorage.getItem(\"private_token\");\n        if (value !== null) {\n          return value;\n        } else {\n          throw new Error(\"Token not found.\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    return function getToken() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fetchData = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var token = yield getToken();\n      console.log(token);\n      var resp = yield fetch(cloud_url + \"/api/v1/list/user\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + token,\n          Accept: \"application/json\"\n        }\n      });\n      if (resp.status !== 200) {\n        console.log(\"Error: \" + resp.status);\n      }\n      var data = yield resp.json();\n      setData(data);\n      setLoading(false);\n    });\n    return function fetchData() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  data.map(function (item) {\n    console.log(item.items);\n  });\n  useEffect(function () {\n    fetchData();\n  }, []);\n\n  var loadLists = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var token = yield getToken();\n      var response = yield fetch(cloud_url + \"/api/v1/list/all\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        console.log(json);\n      });\n    });\n    return function loadLists() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var Item = function Item(_ref5) {\n    var items = _ref5.items;\n    return _jsx(View, {\n      style: styles.container,\n      children: items.map(function (item) {\n        return _jsx(Text, {\n          style: styles.text,\n          children: item.amount\n        });\n      })\n    });\n  };\n  var renderItem = function renderItem(_ref6) {\n    var item = _ref6.item;\n    return _jsx(Item, {\n      items: item.items\n    });\n  };\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.text,\n      children: \"List Page\"\n    }), isLoading && _jsx(Text, {\n      style: styles.text,\n      children: \"Loading...\"\n    }), data && _jsx(FlatList, {\n      data: data,\n      renderItem: renderItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    display: \"flex\"\n  },\n  text: {\n    top: \"18.8%\",\n    left: \"3%\",\n    fontSize: 15,\n    fontWeight: \"bold\",\n    color: \"#5D54A4\",\n    textAlign: \"left\",\n    left: \"5%\"\n  }\n});\nexport default ListPage;","map":{"version":3,"names":["StatusBar","React","useState","Component","useEffect","AsyncStorage","ScroolView","cloud_url","ListPage","navigation","data","setData","isLoading","setLoading","getToken","value","getItem","Error","error","console","log","fetchData","token","resp","fetch","method","headers","Authorization","Accept","status","json","map","item","items","loadLists","response","then","Item","styles","container","text","amount","renderItem","id","StyleSheet","create","flex","backgroundColor","display","top","left","fontSize","fontWeight","color","textAlign"],"sources":["D:/dev/school/swe22/swe-frontend/src/pages/ListPage.js"],"sourcesContent":["import { StatusBar } from \"expo-status-bar\";\r\nimport React, { useState, Component, useEffect } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  Image,\r\n  TextInput,\r\n  Button,\r\n  TouchableOpacity,\r\n  SafeAreaView,\r\n  ScroolView,\r\n  FlatList,\r\n} from \"react-native\";\r\nconst cloud_url =\r\n  \"https://e6waofnzq8.execute-api.eu-central-1.amazonaws.com/main\";\r\n\r\nconst ListPage = ({ navigation }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setLoading] = useState(true);\r\n  const getToken = async () => {\r\n    try {\r\n      const value = await AsyncStorage.getItem(\"private_token\");\r\n      if (value !== null) {\r\n        return value;\r\n      } else {\r\n        throw new Error(\"Token not found.\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const fetchData = async () => {\r\n    const token = await getToken();\r\n    console.log(token);\r\n    const resp = await fetch(cloud_url + \"/api/v1/list/user\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n    if (resp.status !== 200) {\r\n      console.log(\"Error: \" + resp.status);\r\n    }\r\n    const data = await resp.json();\r\n    setData(data);\r\n    setLoading(false);\r\n  };\r\n  data.map((item) => {\r\n    console.log(item.items);\r\n  });\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n  // const tryLogin = async () => {\r\n  //   const token = await getToken();\r\n  //   console.log(token);\r\n  //   if (getToken()) {\r\n  //     console.log(\"icerdeyim\");\r\n\r\n  //     await fetch(cloud_url + \"/api/v1/list/user\", {\r\n  //       method: \"GET\",\r\n  //       headers: {\r\n  //         Authorization: \"Bearer \" + token,\r\n  //         Accept: \"application/json\",\r\n  //       },\r\n  //     })\r\n  //       .then((response) => {\r\n  //         console.log(JSON.stringify(response));\r\n  //         if (response.status !== 200) {\r\n  //           throw Error(\r\n  //             \"No account found with the given credentials. Try again!\"\r\n  //           );\r\n  //         }\r\n  //         return response.json();\r\n  //       })\r\n  //       .then((json) => {\r\n  //         console.log(json);\r\n  //         // parse data\r\n  //         console.log(json[1].items);\r\n  //         navigation.navigate(\"ListPage\");\r\n  //       })\r\n  //       .catch((error) => console.error(error));\r\n  //   } else {\r\n  //     alert(\"You have entered invalid email. Try again!\");\r\n  //   }\r\n  // };\r\n  const loadLists = async () => {\r\n    const token = await getToken();\r\n    let response = await fetch(cloud_url + \"/api/v1/list/all\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        console.log(json);\r\n      });\r\n  };\r\n  const Item = ({ items }) => (\r\n    <View style={styles.container}>\r\n      {items.map((item) => (\r\n        <Text style={styles.text}>{item.amount}</Text>\r\n      ))}\r\n    </View>\r\n  );\r\n  const renderItem = ({ item }) => <Item items={item.items} />;\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <Text style={styles.text}>List Page</Text>\r\n      {isLoading && <Text style={styles.text}>Loading...</Text>}\r\n      {data && (\r\n        <FlatList\r\n          data={data}\r\n          renderItem={renderItem}\r\n          keyExtractor={(item) => item.id}\r\n        ></FlatList>\r\n      )}\r\n    </SafeAreaView>\r\n  );\r\n};\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n    display: \"flex\",\r\n  },\r\n  text: {\r\n    top: \"18.8%\",\r\n    left: \"3%\",\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    color: \"#5D54A4\",\r\n    textAlign: \"left\",\r\n    left: \"5%\",\r\n  },\r\n});\r\n\r\nexport default ListPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}